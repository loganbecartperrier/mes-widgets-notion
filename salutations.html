<!DOCTYPE html>
<html>
<head>
<title>Accueil QG Atama + M√©t√©o</title>
<meta charset="UTF-8">
<style type="text/css">
body {
  /* Fond Notion Dark Mode */
  background-color: #191919; 
  border: none; 
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 95vh;
  margin: 0;
  font-family: 'Oswald', sans-serif;
  color: #E0E0E0;
  text-align: center;
}

/* Conteneur principal pour g√©rer l'espacement */
.widget-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px; /* Espace entre les √©l√©ments */
}

#greet {
  font-weight: 500;
  font-size: 2.5em;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: #FFFFFF;
}

#date {
  font-weight: 400;
  font-size: 1.1em;
  margin: 0;
  color: #9E9E9E;
  text-transform: capitalize;
}

#time {
  font-size: 2em;
  font-weight: 500;
  letter-spacing: 3px;
  margin: 5px 0 15px 0;
  color: #E0E0E0;
}

/* --- Style M√©t√©o --- */
#weather {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  background-color: rgba(255, 255, 255, 0.05);
  padding: 6px 15px;
  border-radius: 20px;
  font-size: 0.9em;
  color: #CCC;
  margin-bottom: 20px;
  opacity: 0;
  animation: fadeIn 1s forwards;
}

@keyframes fadeIn {
  to { opacity: 1; }
}
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500&display=swap" rel="stylesheet">
</head>

<body>

<div class="widget-container">
  <h1 id="greet">Chargement...</h1>
  <p id="date"></p>
  <p id="time"></p>
   
  <div id="weather">Chargement m√©t√©o...</div>
</div>

<script type="text/javascript">

// --- CONFIGURATION M√âT√âO (Bordeaux) ---
const LAT = 44.8378;
const LON = -0.5792;
const API_URL = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current_weather=true`;

const jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];
const mois = ['Janvier', 'F√©vrier', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Ao√ªt', 'Septembre', 'Octobre', 'Novembre', 'D√©cembre'];

function formatZero(i) { return i < 10 ? "0" + i : i; }

// --- LOGIQUE METEO ---
function getWeatherDescription(code) {
  if (code === 0) return { text: "Ciel d√©gag√©", icon: "‚òÄÔ∏è" };
  if (code >= 1 && code <= 3) return { text: "Nuageux", icon: "‚òÅÔ∏è" };
  if (code >= 45 && code <= 48) return { text: "Brouillard", icon: "üå´Ô∏è" };
  if (code >= 51 && code <= 55) return { text: "Bruine", icon: "üå¶Ô∏è" };
  if (code >= 61 && code <= 67) return { text: "Pluie", icon: "üåßÔ∏è" };
  if (code >= 71 && code <= 77) return { text: "Neige", icon: "‚ùÑÔ∏è" };
  if (code >= 95) return { text: "Orage", icon: "‚õàÔ∏è" };
  return { text: "Variable", icon: "üå§Ô∏è" };
}

async function updateWeather() {
  try {
    const response = await fetch(API_URL);
    const data = await response.json();
    const temp = Math.round(data.current_weather.temperature);
    const weatherInfo = getWeatherDescription(data.current_weather.weathercode);
    document.getElementById('weather').innerHTML = `${weatherInfo.icon} Bordeaux : ${temp}¬∞C ‚Ä¢ ${weatherInfo.text}`;
  } catch (error) {
    document.getElementById('weather').innerHTML = "M√©t√©o hors ligne";
  }
}

// --- LOGIQUE HORLOGE ---
function miseAJour() {
  const today = new Date();
  const hrs = today.getHours();
   
  let greet = (hrs < 12) ? 'Bonjour' : (hrs >= 12 && hrs <= 17) ? 'Bon apr√®s-midi' : 'Bonsoir';
  document.getElementById('greet').innerHTML = greet;

  const jourSemaine = jours[today.getDay()];
  const jourMois = today.getDate();
  const moisAnnee = mois[today.getMonth()];
  const annee = today.getFullYear();
  document.getElementById('date').innerHTML = `${jourSemaine} ${jourMois} ${moisAnnee} ${annee}`;

  const h = formatZero(today.getHours());
  const m = formatZero(today.getMinutes());
  const s = formatZero(today.getSeconds());
  document.getElementById('time').innerHTML = `${h} : ${m} : ${s}`;
}

// --- LANCEMENT ---
miseAJour();
setInterval(miseAJour, 1000);
updateWeather();
setInterval(updateWeather, 1800000); 

</script>
</body>
</html>
